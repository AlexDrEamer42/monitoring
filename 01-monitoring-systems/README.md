# Домашнее задание к занятию "13.Системы мониторинга"

1. Набор метрик для мониторинга:
   - Доступность сервера с платформой по ICMP - проверять, что сервер жив
   - Проверка доступности по HTTP - проверять, что жив веб-сервер
   - Свободное место на диске - проверять, что есть место для сохранения отчётов
   - Свободное число inodes - проверять, что есть свободные дескрипторы для создания файлов отчётов
   - Доступная и используемая память - проверять, что памяти для работы платформы достаточно
   - Среднее и максимальное значение IOPS - мониторить производительность платформы
   - Среднее и максимальное значение загрузки CPU - критичный параметр для работы с платформой

2. Предложить в качестве SLI замерять уровень доступности платформы по HTTP.

3. Рассмотреть бесплатные аналоги Sentry. Например, [GlitchTip](https://glitchtip.com/), [Errbit](https://errbit.com/).

4. В формуле не учтены коды ошибок 3xx. Формула должна иметь вид 

    `SLI = (summ_2xx_requests + summ_3xx_requests) / (summ_all_requests)`.

5. Push-cистемы:
	- преимущества:
		- высокая скорость отправки данных по протоколу UDP
		- возможность указать несколько точек отправки для репликации данных в разные системы мониторинга или в их резервные копии
		- возможность гибкой настройки отправки метрик
	- недостатки:
		- протокол UDP не гарантирует доставку данных
		- требует наличие дополнительных служб и программ
      
    Pull-системы:
	- преимущества:
		- возможность организовать как последовательный, так и параллельный сбор данных
		- легче контролировать подлинность данных - можно централизованно задать пул агентов, которые нужно опрашивать
		- возможность настроить взаимодействие системы мониторинга и агентов через прокси-сервер 
		- для отладки можно запрашивать метрики с помощью стороннего ПО
	- недостатки:
		- скорость получения данных ниже, чем в push-системах
		- если агент недоступен во время запроса, метрики не будут получены

6. Какие из ниже перечисленных систем относятся к push модели, а какие к pull? А может есть гибридные?

    - Prometheus - pull, но можно реализовать push-модель через компонент pushgateway
    - TICK - push
    - Zabbix - использует и push, и pull
    - VictoriaMetrics - использует и push, и pull
    - Nagios - pull, но можно реализовать push-модель через модуль NSCA

7. Склонировал репозиторий, запустил TICK-стек командой `./sandbox up`. Скриншот браузера:
    ![01.png](images%2F01.png)

8. Получил метрики CPU, изменил параметры запроса. Скриншот браузера:
    ![02.png](images%2F02.png)

9. Добавил Docker в качестве источника. 
    ```
    [[inputs.docker]]
    endpoint = "unix:///var/run/docker.sock"
    gather_services = false
    container_names = []
    source_tag = false
    container_name_include = []
    container_name_exclude = []
    timeout = "5s"
    perdevice = true
    perdevice_include = ["cpu"]
    total = false
    total_include = ["cpu", "blkio", "network"]
    docker_label_include = []
    docker_label_exclude = []
    tag_env = ["JAVA_HOME", "HEAP_SIZE"]
    ```

    После перезапуска в интерфейсе появился ещё один хост:
    ![03.png](images%2F03.png)










